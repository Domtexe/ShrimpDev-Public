Architecture Intake – Reality Check (Stand 2025-12-04 21:10:05)

Dieser Bericht wurde automatisch durch R1963 erzeugt.

Ziel
----
Die tatsächliche Intake-Architektur von ShrimpDev dokumentieren und
klar festhalten, welche Module aktiv sind und welche historisch /
inaktiv sind. Grundlage sind die Analysen aus den Runnern
R1940/R195x/R1961/R1962 und die vollständigen Module (modules.zip).

Aktiver Intake-Pfad
-------------------

Der Intake-Tab in ShrimpDev wird über folgende Kette aufgebaut:

1. main_gui.py
   - Funktion: _build_intake(self, parent)
   - Aufgaben:
     * erstellt das Intake-Grid
     * bindet Toolbar, linkes Intake-Panel, Projektbaum und LEDs ein

2. modules/ui_left_panel.py  (linkes Panel / Zielpfad / Buttons)
   - Funktion: build_left_panel(grid, app)
   - Elemente:
     * Datei-Name/Endung
     * Zielordner / Pfadangabe
     * Buttons (Neu, Einfügen, Erkennen, Speichern, Undo, AOT, Restart, Log)
   - Diese Buttons rufen Aktionen in modules/logic_actions.py auf
     (R1837-Block, z.B. action_new, action_save, action_detect).

3. modules/ui_project_tree.py  (rechte Liste)
   - Funktion: build_tree(grid, app)
   - Aufgaben:
     * rekursives Scannen des Projektordners
     * Füllen der Treeview mit Name, Endung, Datum, Zeit
   - Die Spalte "Endung" holt die Endung aus dem Dateinamen und
     zeigt diese an (Standard: '.py', '.cmd' etc.).
     Fixes für die Anzeige (z.B. 'py' statt '.py') müssen hier erfolgen.

4. modules/logic_actions.py  (Intake-Logik / R1837)
   - Enthält den zentralen R1837-Block:
       def action_save(app) -> None:
           "Intake-Inhalt im Zielordner als Datei speichern."
   - Dieser Block nutzt:
       _rR1837_get_intake_widgets(app)
       _rR1837_get_text_content(txt)
       _rR1837_status(app, msg)
   - Alle realen Speichervorgänge im Intake laufen über diesen
     R1837-action_save, nicht über alte Placeholder oder
     experimentelle Guards.
   - R1961 erweitert diesen Block um einen Syntax-Check für
     Python-Dateien (compile(content, path, "exec")) und markiert
     Fehlerzeilen mit dem Tag 'syntax_err'.

5. modules/ui_leds.py  (LED / Status)
   - Bewertet u.a. Syntax-Status und andere Zustände, zeigt sie
     im Intake-Tab als farbige LEDs an.
   - Die LED-Anzeige ist von der eigentlichen Editor-Logik getrennt,
     nutzt aber dieselben Statusmeldungen (z.B. bei Syntaxfehlern).

Nicht aktive / historische Intake-Module
----------------------------------------

Die folgenden Module sind im aktuellen Aufbau des Intake-Tabs
NICHT eingebunden:

- modules/module_code_intake.py
- modules/module_code_intake_v1.py
- modules/module_shim_intake.py

Diese Dateien sind historische oder experimentelle Intake-Varianten.
main_gui._build_intake importiert sie nicht und keine der aktiven
GUI-Funktionen ruft sie auf.

Konsequenzen
------------

1. Patches an module_code_intake.py, module_code_intake_v1.py oder
   module_shim_intake.py hatten in der aktuellen ShrimpDev-Version
   keine sichtbare Wirkung auf den Intake-Tab.

2. Alle wirksamen Änderungen am Intake (Save-Verhalten, Syntax-Check,
   Pfadangabe, Zielordner, etc.) müssen in folgenden Modulen erfolgen:

   - modules/logic_actions.py        (R1837-Block: action_save, action_new, action_detect)
   - modules/ui_left_panel.py        (Bedienelemente, Variablen für Name/Endung/Ziel)
   - modules/ui_project_tree.py      (Treeview + Endungsspalte)
   - modules/ui_leds.py              (LED-Status)

3. R1962 wurde eingeführt, um module_code_intake.py aus einem
   älteren Backup vor R1954 wiederherzustellen und damit den
   dort entstandenen Test-/Experiment-Code zurückzusetzen.
   Dies ist ein reiner Cleanup-Schritt für ein inaktives Modul.

Empfohlene Regeln für zukünftige Intake-Änderungen
--------------------------------------------------

1. Vor jedem Patch:
   - Prüfen, ob die Ziel-Funktion tatsächlich von main_gui._build_intake
     (oder nachgelagerten UI-Modulen) verwendet wird.

2. Funktionale Änderungen am Intake:
   - bevorzugt über R1837-Logik in modules/logic_actions.py vornehmen.
   - UI-Anpassungen über ui_left_panel.py und ui_project_tree.py.

3. Historische Module:
   - module_code_intake.py & Co. nur noch als Referenz nutzen oder
     explizit in der Architektur als "legacy / nicht aktiv" markieren.

4. Dokumentation:
   - Neue Architektur- oder Intake-Regeln werden über Runner
     wie R1963 automatisch in docs/ geschrieben, damit
     spätere Patches die tatsächliche Struktur kennen.

Erzeugt durch:
- Runner: R1963
- Datum: 2025-12-04 21:10:05
- Projekt: ShrimpDev (Intake-Architektur)



=== R1987 Intake Health & Autofix ===
- Datum: 2025-12-08T08:03:15
- Aufgabe: Intake-Health-Scan, Legacy-Intake-Archivierung, Pipeline-Eintraege.
- Aktive Intake-Module: main_gui, ui_left_panel, ui_leds, ui_project_tree, logic_actions, logic_intake.
- Legacy-Intake-Module wurden, falls unbenutzt, nach _Archiv/Legacy_Intake kopiert.
