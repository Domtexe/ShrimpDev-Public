ShrimpDev Architektur-Notiz – R2072 (AOT + Restart)
===================================================

1. AOT-Handling
   - Persistenz: ShrimpDev.ini, Sektion [UI], Key always_on_top.
   - Initialisierung: ShrimpDevApp._init_ui_from_ini() liest always_on_top
     über modules.config_loader und setzt self.attributes('-topmost', flag).
   - Speichern: ShrimpDevApp._save_ui_state_to_ini() schreibt den aktuellen
     Topmost-Status beim regulären Beenden in ShrimpDev.ini zurück.

2. AOT-Button (Toolbar links)
   - Implementierung: modules.ui_toolbar._action_toggle_aot(app).
   - R2072: _action_toggle_aot ruft bevorzugt app.toggle_topmost(),
     das sowohl den Fenster-Flag als auch die INI (always_on_top) aktualisiert.
   - Fallback: falls toggle_topmost nicht verfügbar oder fehlerhaft ist,
     wird das alte Verhalten (direktes Toggeln von '-topmost' + LED-Update)
     beibehalten, allerdings ohne INI-Persistenz.

3. Restart-Button
   - Implementierung: modules.ui_toolbar._action_restart(app).
   - Vor R2072: Neustart startete nur main_gui.py neu, ohne vorher den
     UI-State explizit zu speichern. AOT-Änderungen über den Button waren
     daher beim Restart nicht garantiert persistent.
   - R2072: _action_restart ruft vor dem Neustart app._save_ui_state_to_ini(),
     sofern vorhanden. Dadurch werden AOT, Geometrie, Tabs etc. vor dem
     Restart in ShrimpDev.ini gespeichert.

4. Design-Konsequenz
   - Normaler Programmstart/Shutdown: State sauber über INI konsistent.
   - Restart über Toolbar: verhält sich nun weitgehend wie ein regulärer
     Neustart, da der UI-State vorab gespeichert wird.
   - AOT-Änderungen über den Button sind sowohl beim normalen Beenden als
     auch beim Restart konsistent in ShrimpDev.ini abgebildet.
